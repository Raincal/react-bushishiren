webpackJsonp([5],{115:function(e,t,a){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),o=u(n),s=a(5),i=u(s),r=a(6),d=u(r),l=a(7),f=u(l),c=a(9),_=u(c),m=a(8),v=u(m),p=a(3),E=(u(p),a(16)),U=a(19),N=u(U),C=a(132),M=u(C),g=(0,o.default)("i",{className:"write icon"}),h=(0,o.default)("i",{className:"send icon"}),P=(0,o.default)("i",{className:"plus icon"}),S=(0,o.default)("i",{className:"minus icon"}),I=function(e){function t(){return(0,d.default)(this,t),(0,_.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,f.default)(t,[{key:"genderMapping",value:function(e){var t={M:"男",F:"女",X:"保密"};return t[e]}},{key:"render",value:function(){var e=this.props.user;return(0,o.default)("div",{className:M.default.cUserCard},void 0,(0,o.default)("div",{className:"ui cards "+M.default.userCard},void 0,(0,o.default)("div",{className:"card"},void 0,(0,o.default)("div",{className:"content"},void 0,(0,o.default)("div",{className:M.default.userInfo},void 0,(0,o.default)("img",{src:e.avatar}),(0,o.default)("div",{className:M.default.info},void 0,(0,o.default)("p",{className:"name"},void 0,e.name),(0,o.default)("p",{className:"meta"},void 0,this.genderMapping.call(this,e.gender)))),(0,o.default)("div",{className:"description"},void 0,e.bio)),N.default.uid()===e._id?(0,o.default)("div",{className:"extra content"},void 0,(0,o.default)(E.Link,{to:"/users/"+e._id+"/edit"},void 0,g,"编辑个人资料")):(0,o.default)("div",{className:"extra content"},void 0,(0,o.default)(E.Link,{to:"/users/"+e._id+"/message"},void 0,h,"私信"),e.hasFollowed?(0,o.default)("a",{className:"right floated",onClick:function(){return unfollow(e._id)}},void 0,S,"取消关注"):(0,o.default)("a",{className:"right floated",onClick:function(){return follow(e._id)}},void 0,P,"关注")))))}}]),t}(p.Component);t.default=I},116:function(e,t,a){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(115),o=u(n);t.default=o.default},117:function(e,t,a){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),o=u(n),s=a(5),i=u(s),r=a(6),d=u(r),l=a(7),f=u(l),c=a(9),_=u(c),m=a(8),v=u(m),p=a(3),E=(u(p),a(16)),U=a(19),N=u(U),C=a(133),M=(u(C),function(e){function t(){return(0,d.default)(this,t),(0,_.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getUnreadMessagesCount,a=e.getUnreadNotificationsCount,u=e.params.uid;N.default.uid()==u&&(t(),a())}},{key:"render",value:function(){var e=this.props,t=e.messagesUnread,a=e.notificationsUnread,u=e.params.uid,n="/users/"+u;return(0,o.default)("div",{className:"c-user-menu"},void 0,(0,o.default)("div",{className:"ui vertical right tabular menu"},void 0,(0,o.default)(E.Link,{className:"item",activeClassName:"active",to:""+n},void 0,"诗"),(0,o.default)(E.Link,{className:"item",activeClassName:"active",to:n+"/poetries"},void 0,"诗集"),(0,o.default)(E.Link,{className:"item",activeClassName:"active",to:n+"/groups"},void 0,"诗社"),(0,o.default)(E.Link,{className:"item",activeClassName:"active",to:n+"/archive"},void 0,"归档"),N.default.uid()===u?(0,o.default)(E.Link,{className:"item",activeClassName:"active",to:n+"/messages"},void 0,t>0?(0,o.default)("div",{className:"ui button label"},void 0,t):null,"私信"):null,N.default.uid()===u?(0,o.default)(E.Link,{className:"item",activeClassName:"active",to:n+"/notifications"},void 0,a>0?(0,o.default)("div",{className:"ui button label"},void 0,a):null,"通知"):null))}}]),t}(p.Component));t.default=M},118:function(e,t,a){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(117),o=u(n);t.default=o.default},119:function(e,t,a){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),o=u(n),s=a(5),i=u(s),r=a(6),d=u(r),l=a(7),f=u(l),c=a(9),_=u(c),m=a(8),v=u(m),p=a(3),E=u(p),U=a(134),N=u(U),C=a(116),M=u(C),g=a(118),h=u(g),P=function(e){function t(e){(0,d.default)(this,t);var a=(0,_.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.handleScroll=function(e){var t=e.srcElement.body.scrollTop;t>117?a.setState({top:10}):a.setState({top:127-t})},a.state={top:127},a}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this.props.user;return(0,o.default)("div",{className:N.default.cSideMenu,style:{top:this.state.top}},void 0,(0,o.default)("div",{className:"ui grid",style:{width:"100%"}},void 0,(0,o.default)("div",{className:"four wide column "+N.default.cSideMenuContainer},void 0,e?(0,o.default)(M.default,{user:e}):null,E.default.createElement(h.default,this.props))))}}]),t}(p.Component);t.default=P},120:function(e,t,a){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(119),o=u(n);t.default=o.default},132:function(e,t){e.exports={cUserCard:"UserCard__cUserCard___2xX3x",userCard:"UserCard__userCard___5qT8W",userInfo:"UserCard__userInfo___2BfeU",info:"UserCard__info___2Y5_K",name:"UserCard__name___2kfqA"}},133:function(e,t){e.exports={cSideMenu:"UserMenu__cSideMenu___2tXLP",four:"UserMenu__four___1UpY7",wide:"UserMenu__wide___lMi_b",column:"UserMenu__column___2E9Ib"}},134:function(e,t){e.exports={cSideMenu:"UserSideMenu__cSideMenu___2t3Uz",cSideMenuContainer:"UserSideMenu__cSideMenuContainer___1HXuQ"}},175:function(e,t,a){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments[1],a=g[t.type];return a?a(e,t):e}Object.defineProperty(t,"__esModule",{value:!0}),t.actions=t.getUnreadNotificationsCount=t.getUnreadMessagesCount=t.getUser=t.RECEIVE_UNREAD_NOTIFICATIONS_COUNT=t.RECEIVE_UNREAD_MESSAGE_COUNT=t.RECEIVE_USER=void 0;var o,s=a(33),i=u(s),r=a(11),d=u(r);t.default=n;var l=a(30),f=u(l),c=a(60),_=t.RECEIVE_USER="RECEIVE_USER",m=t.RECEIVE_UNREAD_MESSAGE_COUNT="RECEIVE_UNREAD_MESSAGE_COUNT",v=t.RECEIVE_UNREAD_NOTIFICATIONS_COUNT="RECEIVE_UNREAD_NOTIFICATIONS_COUNT",p=function(e){return{type:"RECEIVE_USER",data:e}},E=t.getUser=function(e){return function(t){return(0,f.default)("users/"+e).then(function(e){e.ok&&t(p(e.data))})}},U=function(e){return{type:"RECEIVE_UNREAD_MESSAGE_COUNT",data:e}},N=t.getUnreadMessagesCount=function(){return function(e){return(0,f.default)("messages/unread").then(function(t){t.ok&&e(U(t.data))})}},C=function(e){return{type:"RECEIVE_UNREAD_NOTIFICATIONS_COUNT",data:e}},M=t.getUnreadNotificationsCount=function(){return function(e){return(0,f.default)("notifications/unread").then(function(t){t.ok&&e(C(t.data))})}},g=(t.actions={getPoems:c.getPoems,deletePoem:c.deletePoem,getUser:E,getUnreadMessagesCount:N,getUnreadNotificationsCount:M,recommend:c.recommend,report:c.report,addPoemToPoetry:c.addPoemToPoetry},o={},(0,i.default)(o,c.RECEIVE_POEMS,function(e,t){return(0,d.default)({},e,{poems:t.data})}),(0,i.default)(o,c.RECEIVE_POETRIES,function(e,t){return(0,d.default)({},e,{poetries:t.data})}),(0,i.default)(o,_,function(e,t){return(0,d.default)({},e,{user:t.data})}),(0,i.default)(o,m,function(e,t){return(0,d.default)({},e,{messagesUnread:t.data})}),(0,i.default)(o,v,function(e,t){return(0,d.default)({},e,{notificationsUnread:t.data})}),(0,i.default)(o,c.DELETE_POEM_BY_ID,function(e,t){return(0,d.default)({},e,{poems:e.poems.filter(function(e){return e._id!==t.poemId})})}),o),h={poems:[],poetries:[],user:null,messagesUnread:0,notificationsUnread:0}},255:function(e,t,a){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(11),o=u(n),s=a(32),i=a(175),r=a(525),d=u(r),l=(0,o.default)({},i.actions),f=function(e){return{poems:e.userPoems.poems,user:e.userPoems.user,messagesUnread:e.userPoems.messagesUnread,notificationsUnread:e.userPoems.notificationsUnread,poetries:e.userPoems.poetries}};t.default=(0,s.connect)(f,l)(d.default)},525:function(e,t,a){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(11),o=u(n),s=a(4),i=u(s),r=a(5),d=u(r),l=a(6),f=u(l),c=a(7),_=u(c),m=a(9),v=u(m),p=a(8),E=u(p),U=a(3),N=u(U),C=a(43),M=u(C),g=a(44),h=u(g),P=a(172),S=u(P),I=a(120),y=u(I),O=a(790),R=u(O),k=(0,i.default)(M.default,{}),T=(0,i.default)(h.default,{}),b=function(e){function t(){return(0,f.default)(this,t),(0,v.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,E.default)(t,e),(0,_.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getPoems,a=e.getUser,u=e.params.uid;t(u),a(u)}},{key:"componentWillReceiveProps",value:function(e){var t=e.getPoems,a=e.getUser,u=e.params.uid;u!==this.props.params.uid&&(t(u),a(u))}},{key:"render",value:function(){var e=this,t=this.props.poems;return(0,i.default)("div",{className:R.default.vUserPoems},void 0,k,T,t.map(function(t,a){return N.default.createElement(S.default,(0,o.default)({key:a,poem:t},e.props))}),N.default.createElement(y.default,this.props))}}]),t}(U.Component);t.default=b},790:function(e,t){e.exports={vUserPoems:"UserPoems__vUserPoems___3ZUJT",photo:"UserPoems__photo___3ABSd",title:"UserPoems__title___3P0_L",avatar:"UserPoems__avatar___3CJA0",tag:"UserPoems__tag___3bN9p",right:"UserPoems__right___1LNsD"}}});